{"hash":"9bc4036b3182a2b23a055ea190944462271837c5","data":{"post":{"title":"MLflow spark_udf localpriv","path":"/vulnerabilities/mlflow-spark-udf-localpriv-jfsa-2024-000639017/","content":"<h2 id=\"summary\"><a href=\"#summary\" aria-hidden=\"true\" tabindex=\"-1\">Summary</a></h2>\n<p>Excessive directory permissions in MLflow leads to local privilege escalation when using spark_udf.</p>\n<h2 id=\"component\"><a href=\"#component\" aria-hidden=\"true\" tabindex=\"-1\">Component</a></h2>\n<p><a href=\"https://pypi.org/project/mlflow/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">mlflow</a></p>\n<h2 id=\"affected-versions\"><a href=\"#affected-versions\" aria-hidden=\"true\" tabindex=\"-1\">Affected versions</a></h2>\n<p>(,2.15.1]</p>\n<h2 id=\"description\"><a href=\"#description\" aria-hidden=\"true\" tabindex=\"-1\">Description</a></h2>\n<p>Excessive directory permissions in MLflow leads to local privilege escalation when using spark_udf. This behavior can be exploited by a local attacker to gain elevated permissions by using a ToCToU attack. The issue is only relevant when the spark_udf() MLflow API is called.</p>\n<h2 id=\"poc\"><a href=\"#poc\" aria-hidden=\"true\" tabindex=\"-1\">PoC</a></h2>\n<p>Any MLflow code that uses <code>spark_udf</code> would be vulnerable to this issue, for example -</p>\n<pre><code class=\"language-python\">from pyspark.sql import SparkSession\nspark = SparkSession.builder.appName('SparkFrog').getOrCreate()\npredict = mlflow.pyfunc.spark_udf(spark, 'iris_model')\n</code></pre>\n<h2 id=\"vulnerability-mitigations\"><a href=\"#vulnerability-mitigations\" aria-hidden=\"true\" tabindex=\"-1\">Vulnerability Mitigations</a></h2>\n<p>No mitigations are supplied for this issue</p>\n<h2 id=\"references\"><a href=\"#references\" aria-hidden=\"true\" tabindex=\"-1\">References</a></h2>\n<p><a href=\"https://github.com/mlflow/mlflow/pull/10874\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Fix PR</a></p>\n","description":"CVE-2024-27134, HIGH, Excessive directory permissions in MLflow leads to local privilege escalation when using spark_udf.","date_published":"2024-02-23","xray_id":"JFSA-2024-000639017","vul_id":"CVE-2024-27134","severity":"high","discovered_by":"Uriya Yavnieli","last_updated":"2024-02-23","cvss":null}},"context":{}}